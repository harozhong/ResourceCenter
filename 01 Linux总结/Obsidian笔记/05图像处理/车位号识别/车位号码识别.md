## <font color=Crimson size=4>1. 初步定位</font>
- 通过对图像进行高斯滤波（5×5），Sobel边缘检测，大津法二值化，形态学闭运算，开运算，提取外部轮廓并筛选，得到下图检测结果。
![](https://raw.githubusercontent.com/harozhong/PictureBed/master/img/ParkngNumDetect_FirstLocate.png)

## <font color=Crimson size=4>2. 优化定位思路</font>
1. **确定前景的最小包络矩形：** 通过大津法（或局部）二值化每个定位框内的灰度图，根据前景与背景的比例确定前景部分（可能需要进行闭运算滤波）。根据前景像素重新确定最小包络矩形。
2. **矩形合并：** 根据矩形间的相对位置关系合并矩形。（*1.矩形内前景像素值差小于M，2.两矩形边缘相邻距离小于X个像素，3.相邻边缘线夹角小于Y度，4.相邻边缘中点连线与边缘线的角平分线夹角小于Z度。（对于3,4或者以较大的矩形为基准）*）
3. **字符矩形判断：** 在新的矩形框内，用前景像素（rgb图）的加权均值（）对矩形框内的前景像素进行填充，根据前景与背景像素个数比例，矩形框大小，前景像素在矩形框内的分布（如长度方向前景像素个数波峰波谷变化明显，宽度方向前景像素个数变化较为均匀）对该矩形框是否为字符矩形框进行判断。
4. 
5. 然后寻找聚集的像素中心重新进行sobel边缘检测，然后二值化，形态学开运算（运算），提取外部轮廓。